<!DOCTYPE html>
<html lang="si">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#000;
    color:white;
    padding:20px;
}

.login-box, .panel{
    max-width:400px;
    margin:auto;
    background:#111;
    padding:20px;
    border-radius:10px;
    box-shadow:0 0 10px rgba(255,255,255,0.1);
}

h2, h3{
    text-align:center;
}

input{
    width:100%;
    padding:10px;
    margin:8px 0;
    border:none;
    border-radius:5px;
    box-sizing:border-box;
}

button{
    width:100%;
    padding:10px;
    border:none;
    border-radius:5px;
    background:#e50914;
    color:white;
    font-weight:bold;
    cursor:pointer;
    margin-top:10px;
}

button:hover{
    background:#ff1f1f;
}

.movie{
    background:#222;
    padding:10px;
    border-radius:5px;
    margin-top:10px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}

.delete{
    cursor:pointer;
}
</style>
</head>
<body>

<div class="login-box" id="loginBox">
    <h2>පරිපාලක පිවිසුම</h2>
    <input type="password" id="password" placeholder="මුරපදය ඇතුළත් කරන්න">
    <button onclick="login()">Login</button>
</div>

<div class="panel" id="adminPanel" style="display:none;">
    <h2>පරිපාලක පැනලය</h2>

    <input type="text" id="title" placeholder="චිත්‍රපට නම">
    <input type="text" id="price" placeholder="මිල">

    <button onclick="addMovie()">චිත්‍රපටය එක් කරන්න</button>

    <h3>චිත්‍රපට ලැයිස්තුව</h3>
    <div id="movieList"></div>
</div>

<script>
const ADMIN_PASSWORD = "1234"; // මෙතන මුරපදය වෙනස් කරන්න

function login(){
    const pass = document.getElementById("password").value;

    if(pass === ADMIN_PASSWORD){
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("adminPanel").style.display = "block";
        loadMovies();
    } else {
        alert("වැරදි මුරපදය");
    }
}

function getMovies(){
    return JSON.parse(localStorage.getItem("movies") || "[]");
}

function saveMovies(movies){
    localStorage.setItem("movies", JSON.stringify(movies));
}

function addMovie(){
    const title = document.getElementById("title").value.trim();
    const price = document.getElementById("price").value.trim();

    if(!title || !price){
        alert("සියලුම තොරතුරු ඇතුළත් කරන්න");
        return;
    }

    if(isNaN(price)){
        alert("මිල අංකයක් විය යුතුයි");
        return;
    }

    const movies = getMovies();

    if(movies.some(m => m.title === title)){
        alert("චිත්‍රපටය දැනටමත් ඇත");
        return;
    }

    movies.push({title, price});
    saveMovies(movies);
    loadMovies();

    document.getElementById("title").value = "";
    document.getElementById("price").value = "";
}

function deleteMovie(index){
    if(!confirm("මෙම චිත්‍රපටය මකා දමන්නද?")) return;

    const movies = getMovies();
    movies.splice(index, 1);
    saveMovies(movies);
    loadMovies();
}

function loadMovies(){
    const list = document.getElementById("movieList");
    const movies = getMovies();

    list.innerHTML = "";

    movies.forEach((movie, i)=>{
        list.innerHTML += `
            <div class="movie">
                <span>${movie.title} - රු. ${movie.price}</span>
                <span class="delete" onclick="deleteMovie(${i})">❌</span>
            </div>
        `;
    });
}

// Enter key support
document.getElementById("password").addEventListener("keypress", e => {
    if (e.key === "Enter") login();
});
</script>

</body>
</html>
